<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Style Coordinator Demo</title>
    <link rel="stylesheet" href="../src/styles/base.css">
    <style>
        /* Demo-specific styles */
        .demo-section {
            margin: 2rem 0;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            background-color: var(--surface-color);
        }
        
        .theme-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .theme-button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            background-color: var(--background-color);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .theme-button:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .theme-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .status-bar {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            padding: 0.5rem 1rem;
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .animation-demo {
            width: 100px;
            height: 100px;
            background-color: var(--primary-color);
            border-radius: 0.5rem;
            margin: 1rem 0;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .animation-demo:hover {
            transform: scale(1.1) rotate(5deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <header style="text-align: center; margin: 2rem 0;">
            <h1>Style Coordinator Demo</h1>
            <p>A comprehensive styling system for modern web applications</p>
        </header>

        <!-- Theme Selector -->
        <div class="demo-section">
            <h2>Theme Management</h2>
            <p>Switch between different themes to see the Style Coordinator in action:</p>
            <div class="theme-selector">
                <button class="theme-button active" data-theme="light">Light</button>
                <button class="theme-button" data-theme="dark">Dark</button>
                <button class="theme-button" data-theme="ocean">Ocean</button>
                <button class="theme-button" data-theme="sunset">Sunset</button>
                <button class="theme-button" data-theme="forest">Forest</button>
            </div>
        </div>

        <!-- Typography Demo -->
        <div class="demo-section">
            <h2>Typography</h2>
            <h1>Heading 1 - Main Title</h1>
            <h2>Heading 2 - Section Title</h2>
            <h3>Heading 3 - Subsection</h3>
            <p>This is a paragraph with <a href="#">a link</a> and some <strong>bold text</strong>. The typography scales beautifully with different themes and maintains excellent readability.</p>
            <small>This is small text for additional information.</small>
        </div>

        <!-- Components Demo -->
        <div class="demo-section">
            <h2>Components</h2>
            <div class="component-grid">
                <!-- Buttons -->
                <div class="card">
                    <h3>Buttons</h3>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn-primary">Primary</button>
                        <button class="btn-secondary">Secondary</button>
                        <button class="btn-outline">Outline</button>
                        <button class="btn-ghost">Ghost</button>
                    </div>
                </div>

                <!-- Form Elements -->
                <div class="card">
                    <h3>Form Elements</h3>
                    <form style="display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem;">
                        <input type="text" placeholder="Your name" />
                        <input type="email" placeholder="Your email" />
                        <textarea placeholder="Your message" rows="3"></textarea>
                        <select>
                            <option>Choose an option</option>
                            <option>Option 1</option>
                            <option>Option 2</option>
                        </select>
                        <button type="submit">Submit</button>
                    </form>
                </div>

                <!-- Status Messages -->
                <div class="card">
                    <h3>Status Messages</h3>
                    <div class="alert alert-success">Success! Your changes have been saved.</div>
                    <div class="alert alert-warning">Warning: Please check your input.</div>
                    <div class="alert alert-error">Error: Something went wrong.</div>
                    <div class="alert alert-info">Info: Here's some helpful information.</div>
                </div>

                <!-- Loading States -->
                <div class="card">
                    <h3>Loading States</h3>
                    <p>Loading spinner: <span class="spinner"></span></p>
                    <button class="loading">Loading Button</button>
                    <div class="loading" style="margin-top: 1rem;">
                        <p>This content is in a loading state</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Animation Demo -->
        <div class="demo-section">
            <h2>Animations</h2>
            <p>Click the box below to see animations in action:</p>
            <div class="animation-demo" id="animationDemo"></div>
            <button onclick="animateBox()">Animate Box</button>
        </div>

        <!-- Responsive Demo -->
        <div class="demo-section">
            <h2>Responsive Design</h2>
            <p>Resize your browser window to see how the layout adapts:</p>
            <div class="component-grid">
                <div class="card">
                    <h4>Card 1</h4>
                    <p>This card will stack on mobile devices.</p>
                </div>
                <div class="card">
                    <h4>Card 2</h4>
                    <p>Grid layout automatically adjusts.</p>
                </div>
                <div class="card">
                    <h4>Card 3</h4>
                    <p>Responsive by default.</p>
                </div>
            </div>
        </div>

        <!-- Utility Classes Demo -->
        <div class="demo-section">
            <h2>Utility Classes</h2>
            <div class="flex justify-between align-center" style="margin-bottom: 1rem;">
                <span>Flexbox utilities</span>
                <button>Action</button>
            </div>
            <div class="text-center p-4 bg-surface rounded">
                <p class="font-bold">Centered content with padding</p>
            </div>
        </div>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" title="Toggle Theme">
        üåô
    </button>

    <!-- Status Bar -->
    <div class="status-bar" id="statusBar">
        Current Theme: <span id="currentTheme">light</span>
    </div>

    <!-- Scripts -->
    <script type="module">
        import StyleCoordinator, { styleCoordinator } from '../src/styles/StyleCoordinator.js';
        import { styleConfig } from '../src/styles/config.js';

        // Add custom themes to the coordinator
        Object.entries(styleConfig.customThemes).forEach(([name, theme]) => {
            styleCoordinator.addTheme(name, theme);
        });

        // Generate utility classes
        styleCoordinator.generateUtilityClasses();

        // Theme selector functionality
        const themeButtons = document.querySelectorAll('.theme-button');
        const themeToggle = document.getElementById('themeToggle');
        const statusBar = document.getElementById('currentTheme');

        themeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const theme = button.dataset.theme;
                styleCoordinator.loadTheme(theme);
                
                // Update active button
                themeButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update theme toggle icon
                themeToggle.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                
                // Update status bar
                statusBar.textContent = theme;
            });
        });

        // Theme toggle button
        themeToggle.addEventListener('click', () => {
            styleCoordinator.toggleTheme();
            const currentTheme = styleCoordinator.getCurrentThemeInfo().name;
            
            // Update active button
            themeButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.theme === currentTheme);
            });
            
            // Update icon
            themeToggle.textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            
            // Update status bar
            statusBar.textContent = currentTheme;
        });

        // Subscribe to style coordinator events
        const unsubscribe = styleCoordinator.subscribe((event, data) => {
            console.log('Style Coordinator Event:', event, data);
            
            if (event === 'themeChanged') {
                // You can perform additional actions when theme changes
                document.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
            }
            
            if (event === 'breakpointChanged') {
                console.log(`Breakpoint changed: ${data.breakpoint} - ${data.matches ? 'active' : 'inactive'}`);
            }
        });

        // Animation demo
        window.animateBox = function() {
            const box = document.getElementById('animationDemo');
            const keyframes = [
                { transform: 'scale(1) rotate(0deg)', backgroundColor: 'var(--primary-color)' },
                { transform: 'scale(1.2) rotate(180deg)', backgroundColor: 'var(--success-color)' },
                { transform: 'scale(1) rotate(360deg)', backgroundColor: 'var(--primary-color)' }
            ];
            
            const options = {
                duration: 1000,
                easing: 'ease-in-out'
            };
            
            styleCoordinator.animateElement(box, keyframes, options);
        };

        // Component styling examples
        function setupComponentStyles() {
            // Style buttons with variants
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.classList.contains('btn-primary')) {
                    styleCoordinator.applyComponentStyles(button, styleConfig.components.button.variants.primary);
                } else if (button.classList.contains('btn-secondary')) {
                    styleCoordinator.applyComponentStyles(button, styleConfig.components.button.variants.secondary);
                } else if (button.classList.contains('btn-outline')) {
                    styleCoordinator.applyComponentStyles(button, styleConfig.components.button.variants.outline);
                } else if (button.classList.contains('btn-ghost')) {
                    styleCoordinator.applyComponentStyles(button, styleConfig.components.button.variants.ghost);
                }
            });
        }

        // Initialize component styles
        setupComponentStyles();

        // Demonstrate dynamic style sheet addition
        const dynamicStyles = `
            .demo-highlight {
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                color: white;
                padding: 0.5rem;
                border-radius: 0.25rem;
                animation: pulse 2s infinite;
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.7; }
            }
        `;
        
        styleCoordinator.addStyleSheet('demo-styles', dynamicStyles);

        console.log('Style Coordinator Demo initialized!');
        console.log('Current theme info:', styleCoordinator.getCurrentThemeInfo());
    </script>
</body>
</html>